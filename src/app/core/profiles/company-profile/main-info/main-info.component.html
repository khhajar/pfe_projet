<div class="bg-white p-6 border border-gray-300 mx-auto max-w-4xl w-full">
  <p class="text-xl font-bold capitalize mb-5">Main Information</p>
  <app-spinner-local *ngIf="isLoading"></app-spinner-local>
  <ng-container *ngIf="!isLoading">
    <app-profile-image
      [profileImage]="profileImage"
      (imageUploaded)="onImageSelected($event)"
    ></app-profile-image>

    <form [formGroup]="mainInfoForm" (ngSubmit)="onSubmit()">
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div class="flex flex-col">
          <label
            for="company-name"
            class="capitalize font-semibold text-blue-950 mb-1"
            >Company Name</label
          >
          <input
            type="text"
            id="company-name"
            placeholder="Enter company name"
            class="bg-gray-100 border border-gray-300 p-2 w-full outline-none focus:ring-1 focus:ring-primary"
            formControlName="companyName"
          />
          <small
            *ngIf="
              mainInfoForm.get('companyName')?.invalid &&
              mainInfoForm.get('companyName')?.touched
            "
            class="text-red-500 font-semibold"
          >
            Company Name is required.
          </small>
        </div>

        <div class="flex flex-col">
          <label for="city" class="capitalize font-semibold text-blue-950 mb-1"
            >City</label
          >
          <select
            id="city"
            class="border border-gray-300 bg-gray-50 p-2 w-full outline-none focus:ring-1 focus:ring-primary"
            formControlName="city"
          >
            <option value="" disabled>Select city</option>
            <option *ngFor="let city of cities" [value]="city">
              {{ city }}
            </option>
          </select>
          <small
            *ngIf="
              mainInfoForm.get('city')?.invalid &&
              mainInfoForm.get('city')?.touched
            "
            class="text-red-500 font-semibold"
          >
            City is required.
          </small>
        </div>

        <div class="flex flex-col">
          <label
            for="company-size"
            class="capitalize font-semibold text-blue-950 mb-1"
            >Company Size</label
          >
          <select
            id="company-size"
            class="border border-gray-300 bg-gray-50 p-2 w-full outline-none focus:ring-1 focus:ring-primary"
            formControlName="companySize"
          >
            <option value="" disabled>Select company size</option>
            <option *ngFor="let size of companSizes" [value]="size">
              {{ size }}
            </option>
          </select>
          <small
            *ngIf="
              mainInfoForm.get('companySize')?.invalid &&
              mainInfoForm.get('companySize')?.touched
            "
            class="text-red-500 font-semibold"
          >
            Company Size is required.
          </small>
        </div>

        <div class="flex flex-col">
          <label
            for="specialties"
            class="capitalize font-semibold text-blue-950 mb-1"
            >Specialties</label
          >
          <select
            id="specialties"
            class="border border-gray-300 bg-gray-50 p-2 w-full outline-none focus:ring-1 focus:ring-primary"
            formControlName="specialties"
          >
            <option value="" disabled>Select speciality</option>
            <option *ngFor="let specialty of specialties" [value]="specialty">
              {{ specialty }}
            </option>
          </select>
          <small
            *ngIf="
              mainInfoForm.get('specialties')?.invalid &&
              mainInfoForm.get('specialties')?.touched
            "
            class="text-red-500 font-semibold"
          >
            Specialties is required.
          </small>
        </div>

        <div class="flex flex-col">
          <label for="phone" class="capitalize font-semibold text-blue-950 mb-1"
            >Company Phone Number</label
          >
          <input
            type="text"
            placeholder="Enter phone number"
            id="phone"
            class="bg-gray-100 border border-gray-300 p-2 w-full outline-none focus:ring-1 focus:ring-primary"
            formControlName="phone"
          />
          <small
            *ngIf="
              mainInfoForm.get('phone')?.invalid &&
              mainInfoForm.get('phone')?.touched
            "
            class="text-red-500 font-semibold"
          >
            A valid phone number is required.
          </small>
        </div>

        <div class="flex flex-col sm:col-span-2">
          <label for="about" class="font-semibold text-sm mb-1"
            >About Company</label
          >
          <textarea
            id="about"
            class="w-full p-3 h-32 border bg-gray-50 border-gray-300 outline-none focus:ring-1 focus:ring-primary"
            maxlength="1000"
            placeholder="Write about your company..."
            formControlName="about"
          ></textarea>
          <p class="text-sm text-gray-500 mt-1">
            You have 1000 characters remaining (max 1000).
          </p>
          <small
            *ngIf="
              mainInfoForm.get('about')?.invalid &&
              mainInfoForm.get('about')?.touched
            "
            class="text-red-500 font-semibold"
          >
            About Company is required.
          </small>
        </div>
      </div>

      <button
        type="submit"
        class="text-white bg-primary hover:bg-hoverPrimary transition-all px-5 py-2 font-medium w-full sm:w-auto mt-4 disabled:cursor-not-allowed disabled:bg-gray-300"
        [disabled]="mainInfoForm.invalid || profileImage == ''"
      >
        Save Changes
      </button>
    </form>
  </ng-container>
</div>
